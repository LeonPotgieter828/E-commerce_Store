@model Store.Models.ViewModels.CartViewModel;
@{
    ViewData["Title"] = "Cart";
}


<div class="cart">
    @for(int i = 0; i < Model.Products.Count; i++)
    {
        <div class="item-box">
            <div class="item-info">
                <label>@Model.Products[i].Name</label>
                <label>@Model.Products[i].Price</label>
                <div>
                    <button onclick="changeCount(1)">+</button>
                        <input type="hidden" id="hiddenCount" value="quantity"/>
                        <lable id="quantity">@Model.Quantity[i]</lable>
                    <button onclick="changeCount(-1)">-</button>
                </div>
            </div>
            <button>Delete</button>
        </div>

    }

    <label>Cart Total @Model.Total</label>
    <button>Checkout</button>
</div>





<style>
    .cart{
        display: flex;
        flex-direction: column;
        row-gap: 10px;
        align-items: center;
        justify-content: center;
    }

    .item-info{
        display: flex;
        flex-direction: column;
        row-gap: 8px;
        align-items: center;
    }

</style>

<script>
    let count = document.getElementById('quantity').textContent;

    function changeCount(amount){
        fext('/Home/Cart', {
            method: 'Get'
        })

        

    count += amount;
    if (count < 0) count = 0;
        document.getElementById('quantity').textContent = count;
        document.getElementById('hiddenCount').value = count;
    }
</script>